(function(e){var t={position:{}},n=null,r=null,i=null,s={init:function(t){var n=e.fn.irisLoginGallery.defaults=e.extend({},e.fn.irisLoginGallery.defaults,t);n.websiteID!=0?e.when(e.getScript(n.scripts.carouFredSel),e.getScript(n.scripts.waitForImages),e.Deferred(function(t){e(t.resolve)})).done(e.ajax({url:n.irisLoginAPI+"gallery/"+n.websiteID+"?callback=?",type:"GET",dataType:"jsonp",success:function(e,t,n){if(e.result)s.build(e.data.galleries);else{alert("Galleries not loaded. Check console for more informations.");if(defaults.debug){console.log("IrisLoginGallery: ERROR malformed data received!");console.log(e)}}},error:function(e,t,n){document.console.log("IrisLoginGallery: ERROR while getting data.");if(defaults.debug){console.log(e);console.log(n)}}})):document.console.log("IrisLoginGallery: ERROR No website ID given.")},build:function(t,n){setup=e.extend({},e.fn.irisLoginGallery.defaults,n);if(!setup.wrapperID){alert("Wrong Setup. Check console for more informations.");console.log("Wrapper ID Not set.")}else for(var r=t.length-1;r>=0;r--){var i=t[r],o=setup.galleryID+i.gid;wrapper=e("<DIV/>").attr({id:o,"class":"well"}).css({"min-width":"300px","max-width":"1200px",margin:"50px auto"});wrapper.append(e("<h2/>").text(i.name).css("text-align","center"));gall=e("<div/>").attr({"class":setup.galleriesClass,"data-gid":i.gid}).css({"text-align":"center",margin:"20px 0px 0px 10px"});for(var u=i.images.length-1;u>=0;u--){imageData=i.images[u];img=e("<img/>").attr({"class":"gallery-image",title:imageData.title,alt:imageData.descr,src:setup.irisLogin+imageData.thumb,"data-large":setup.irisLogin+imageData.full_size,"data-gid":i.gid,"data-imgID":imageData.id}).bind("click",function(e){s.prepare(this.getAttribute("data-imgid"),this.getAttribute("data-gid"))}).css({display:"inline-block",border:"1px solid #ccc",padding:"12px",margin:"0px 20px 20px 0px"});gall.prepend(img)}wrapper.append(gall);wrapper.prependTo("#"+setup.wrapperID)}},prepare:function(o,u,a){setup=e.extend({},e.fn.irisLoginGallery.defaults,a);var f=setup.galleryID+u,l=e("<div/>").attr({id:setup.slideshowBackdropID}).css({"min-height":e(window).height,"background-image":"url("+setup.images.loaderBackImage+")"}).css(e.fn.irisLoginGallery.style.slideshowBackdrop),c=e(window).width(),h=e(window).height();t.width=c*.8;t.height=h*.75;t.position.top=h/2-t.height/2;t.position.left=c/2-t.width/2;i=e("<div/>").attr({id:setup.slideshowWrapperID}).css({width:t.width,height:t.height,top:t.position.top,left:t.position.left}).css(e.fn.irisLoginGallery.style.slideshowWrapper);r=e("#"+f+" ."+setup.galleriesClass).clone().removeClass(setup.galleriesClass);r.attr({id:setup.slideshowThumbnailID,style:!1}).css(e.fn.irisLoginGallery.style.slideshowThumbnail).find("img").each(function(){this.removeAttribute("data-large");this.removeAttribute("style");e(this).css({display:"block","float":"left",margin:"10px",width:"100px",height:"100px","box-shadow":"0 0 10px #000"})});n=e("#"+f+" ."+setup.galleriesClass).clone().removeClass(setup.galleriesClass);n.attr({id:setup.slideshowCaruselID,style:!1}).css(e.fn.irisLoginGallery.style.slideshowCarusel).find("img").each(function(e){if(this.src){this.onload=function(){var e=i.height()/this.height,t=this.width*e;this.setAttribute("width",t);this.setAttribute("height",i.height());this.removeAttribute("style");this.style.display="block";this.style.float="left"};this.src=this.getAttribute("data-large");this.removeAttribute("data-large")}});i.append(n);i.append(r);r.children("img").click(function(){o=this.getAttribute("data-imgid");selector="#"+setup.slideshowCaruselID+" img[data-imgid="+o+"]";n.trigger("slideTo",[e(selector)])}).css("cursor","pointer");i.hover(function(){n.trigger("pause");r.parent().animate({bottom:"120"})},function(){n.trigger("play");r.parent().animate({bottom:"30"})});l.click(function(){s.destroy()});if(setup.closeButtonID!=0)var p=e("<img/>").attr({id:setup.closeButtonID,src:setup.images.closeImage}).css({top:t.position.top-15,left:t.position.left-15}).css(e.fn.irisLoginGallery.style.closeButton).bind("click",s.destroy).appendTo(i);setup.externalCloseButtonID!=0&&e(setup.closeButtonID).bind("click",function(t){t.preventDefault();e(this).unbind("click");s.destroy()});e("body").append(l);e("body").append(i);l.animate({opacity:1},"fast");n.waitForImages({finished:function(){setTimeout(function(){s.start(o,u,a)},50)}})},start:function(i,s,o){setup=e.extend({},e.fn.irisLoginGallery.defaults,o);var u=setup.galleryID+s;n=e("#"+setup.slideshowCaruselID);r=e("#"+setup.slideshowThumbnailID);n.carouFredSel({width:"100%",height:"100%",items:{start:e("#"+setup.slideshowCaruselID+" img[data-imgid="+i+"]"),visible:1,height:t.height},scroll:{fx:"crossfade",onBefore:function(t){i=t.items.visible.data("imgid");pos=Math.floor(setup.thumbs_visible/2)-1;r.trigger("slideTo",[e("#"+setup.slideshowThumbnailID+" img[data-imgid="+i+"]"),-pos])}},prev:{key:"left"},next:{key:"right"},onCreate:function(t){e("#"+setup.slideshowWrapperID).animate({opacity:1})}},{debug:setup.carouFredSel_DEBUG});r.carouFredSel({auto:!1,width:"100%"},{debug:setup.carouFredSel_DEBUG});setup.thumbs_visible=r.children("img").size();n.trigger("play",[0,!0])},stop:function(){e("#"+setup.slideshowCaruselID).trigger("stop");e("#"+setup.slideshowThumbnailID).trigger("stop")},update:function(t){e("#"+setup.slideshowCaruselID).trigger("updateSizes");e("#"+setup.slideshowThumbnailID).trigger("updateSizes")},destroy:function(t){setup=e.extend({},e.fn.irisLoginGallery.defaults,t);var n=document.getElementById(setup.slideshowWrapperID),r=document.getElementById(setup.slideshowBackdropID);s.stop();e(n).animate({opacity:0},200,function(){n.parentNode.removeChild(n)});e(r).animate({opacity:0},200,function(){e("#"+setup.slideshowCaruselID).trigger("destroy");e("#"+setup.slideshowThumbnailID).trigger("destroy");r.parentNode.removeChild(r)})}};e.fn.irisLoginGallery=function(t){if(s[t])return s[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return s.init.apply(this,arguments);e.error("Method "+method+" does not exist on jQuery.irisLoginGallery")};e.fn.irisLoginGallery.defaults={debug:!1,irisLoginAPI:"http://api.irislogin.it/",irisLogin:"http://irislogin.it/",images:{closeImage:"http://api.irislogin.it/public/img/btn-del-over-small.png",loaderBackImage:"http://api.irislogin.it/public/img/ajax-loader-big.gif"},scripts:{carouFredSel:"http://api.irislogin.it/public/js/jquery.carouFredSel.min.js",waitForImages:"http://api.irislogin.it/public/js/jquery.waitForImages.min.js"},galleries:[],websiteID:0,gallerySelected:0,startFrom:0,thumbs_visible:5,autoPlay:!1,wrapperID:!1,galleryID:"irislogin-gallery-",galleriesClass:"irislogin-galleries-wrapper",closeButtonID:!1,externalCloseButtonID:!1,slideshowBackdropID:"slideshow-overall-backdrop",slideshowWrapperID:"slideshow-wrapper",slideshowCaruselID:"slideshow-carusel",slideshowThumbnailID:"slideshow-thumb",carouFredSel_DEBUG:!1};e.fn.irisLoginGallery.style={closeButton:{position:"fixed","z-index":9e3},slideshowBackdrop:{position:"fixed",top:0,left:0,width:"100%",height:"100%","background-repeat":"no-repeat","background-position":"center","background-color":"#FAFAFA","z-index":5e3,opacity:0},slideshowWrapper:{position:"fixed","background-color":"#000","box-shadow":"0 20px 50px #333","z-index":5500,overflow:"hidden",opacity:0},slideshowCarusel:{overflow:"hidden","z-index":6e3},slideshowThumbnail:{height:"120px",overflow:"hidden",position:"relative",bottom:"50px","min-width":"250px","z-index":6500}}})(jQuery);